<% content_for :title, "Select a Plan" %>

<%= turbo_stream_from dom_id(Current.user.payment_processor) %>

<div class="container">
  <div class="row">
    <div class="col-md-8 mx-auto text-center">
      <h1 class="d-hotwire-native-none my-4">Select a Plan</h1>

      <%= purchasekit_paywall customer_id: Current.user.payment_processor.id, success_path: paid_path do |paywall| %>
        <div class="row g-3 mt-hotwire-native-2">
          <div class="col-6">
            <%= render "plan_option",
              paywall: paywall,
              product: @annual,
              name: "Annual",
              period: "/yr",
              description: "Billed yearly",
              badge: "Best value",
              selected: true
            %>
          </div>

          <div class="col-6">
            <%= render "plan_option",
              paywall: paywall,
              product: @monthly,
              name: "Monthly",
              period: "/mo",
              description: "Billed monthly"
            %>
          </div>
        </div>

        <%= paywall.submit "Subscribe", class: "btn btn-primary btn-lg w-100 rounded-pill mt-3" %>

        <div class="text-center mt-3">
          <%= button_to "Restore purchases", restore_paywall_path, class: "btn btn-link text-muted small p-0" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
